<!DOCTYPE html>
<html lang="uk">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0 maximum-scale=1.0, user-scalable=no">
<meta http-equiv="X-UA-Compatible" content="ie=edge">
<meta http-equiv="pragma" content="no-cache">
<meta http-equiv="cache-control" content="no-cache">
<meta name="description" content="">
<meta name="author" content="Vitalii Kolomiiets, Kyiv, Ukraine, vitaljan@gmail.com">
<title></title>
<link rel="shortcut icon" href="favicon.ico" type="image/x-icon">
<link rel="stylesheet" href="assets/css/styles.css">
</head>
<body>
  <div class="main">
    <div class="left">
      <div class="pictures">
        <div class="more-img">
        </div>
        <div class="main-img">
          <!-- <img src="assets/img/blue1.png" alt=""> -->
        </div>
      </div>
      <div class="props">
        <div class="props-item">
          <h2>includes</h2>
          Hard case protective case with zipper
        </div>
        <div class="props-item">
            <h2>30-day</h2>
            100 percent, no questions asked, money back gurantee
        </div>
        <div class="props-item">
          <h2>2-year</h2>
          warranty covering frame damage at no charge
        </div>
        <div class="props-item">
          <h2>free</h2>
          shipping & returns on all orders to the US
        </div>
      </div>
    </div>
    <div class="right">
      <h2>wrap around</h2>
      <div class="variation">
        <div class="product">
          <span class="product-name">trivex&reg;</span>
          <span class="price">
            <span class="oldprice">50</span><span class="newprice">30</span><span class="curprice">30</span>
          </span>
        </div>
        <div class="images">
          <div class="color-img brown active"></div>
          <div class="color-img blue"></div>
          <div class="color-img green sale"></div>
        </div>
      </div>
      <div class="variation"></div>
      <div class="variation"></div>
      <div class="btn"><span>add to cart</span></div>
      <div class="btn inversion"><span>build your prescription</span></div>
    </div>
  </div>
</body>
<script>
  let products = [
    {name: 'POLYCARBONATE', colors: [
      {color: 'brown', price: 30},{color: 'blue', price: 30, sale: true},{color: 'green', price: 30}
    ]},
    {name: 'POLYCARBONATE POLARIZED', colors: [
      {color: 'brown', price: 30, oldprice: 50},{color: 'blue', price: 30, sale: true},{color: 'green', price: 30}
    ]},
    {name: 'TRIVEX&reg; PERFORMANCE', colors: [
      {color: 'brown', price: 75},{color: 'blue', price: 75, sale: true},{color: 'green', price: 75}
    ]}
  ];

  let currentColor = 'brown';
  let currentView = 1;

  
  const showLeft = ()=>{ // left block rendering
    document.querySelector('.main-img').innerHTML = `<img src="assets/img/${currentColor}${currentView}.png" alt="">`;
    if (!document.querySelector('.more-img-item')) {
      console.log('document.querySelector(')
      for (let i = 1; i <= 3; i++) {
        active = i == currentView ? 'active' : '';
        document.querySelector('.more-img').innerHTML += `<div class="more-img-item ${active}" data-view="${i}"><img src="assets/img/${currentColor}${i}.png" alt=""></div>`;
      }
    } else {
      let n = 1;
      document.querySelectorAll('.more-img-item').forEach((item)=>{
        item.setAttribute('src',`assets/img/${currentColor}${currentView}.png`);
        active = n == currentView ? 'active' : '';
        n++;
        if (active) {item.classList.add('active')} else {item.classList.remove('active')};
      })
    }
  }
  
  showLeft();
  let moreImg = document.querySelectorAll('.more-img-item');

  const moreImgHandler = (event)=>{
    let viewID = event.currentTarget.dataset.view;
    if (!viewID) return;
    currentView = viewID;
    showLeft();
  }

  moreImg.forEach((item)=>{item.addEventListener('click', moreImgHandler)});
</script>
</html>